{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5 p-4 bg-white rounded shadow-sm">
    <h2 class="text-center text-primary fw-semibold mb-4">All Student Applications</h2>

    <table class="table table-hover align-middle">
        <thead class="table-primary">
            <tr>
                <th>Student</th>
                <th>Program</th>
                <th>Status</th>
                <th>Transcript</th>
                <th>Certificate</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
        {% for app in applications %}
            <tr>
                <td>{{ app.student.username }}</td>
                <td>{{ app.program.name }}</td>
                <td>
                    {% if app.status == 'approved' %}
                        <span class="badge bg-success">Approved</span>
                    {% elif app.status == 'rejected' %}
                        <span class="badge bg-danger">Rejected</span>
                    {% else %}
                        <span class="badge bg-warning text-dark">Pending</span>
                    {% endif %}
                </td>
                <td>
                    {% if app.transcript %}
                        <a href="{{ app.transcript.url }}" target="_blank" class="btn btn-outline-primary btn-sm">View</a>
                    {% else %}
                        <span class="text-muted">No File</span>
                    {% endif %}
                </td>
                <td>
                    {% if app.certificate %}
                        <a href="{{ app.certificate.url }}" target="_blank" class="btn btn-outline-primary btn-sm">View</a>
                    {% else %}
                        <span class="text-muted">No File</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'update_application_status' app.id 'approved' %}" class="btn btn-success btn-sm me-1">Approve</a>
                    <a href="{% url 'update_application_status' app.id 'rejected' %}" class="btn btn-danger btn-sm">Reject</a>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="6" class="text-center text-muted">No applications yet.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<style>
    body {
        background-color: #f8f9fa;
    }

    .table-hover tbody tr:hover {
        background-color: #eef4ff;
        transition: 0.3s;
    }

    .btn {
        border-radius: 6px;
    }

    .container {
        max-width: 900px;
    }
</style>
{% endblock %}
